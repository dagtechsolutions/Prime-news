<%- include('../partials/admin_header', { pageTitle: (typeof article !== 'undefined' ? 'Edit Article' : 'Add New Article') }) %>

<h2><%= typeof article !== 'undefined' ? 'Edit Article' : 'Add New Article' %></h2>

<form class="admin-form" action="<%= typeof article !== 'undefined' ? '/admin/articles/edit/' + article.id + '?_method=PUT' : '/admin/articles/new' %>" method="POST">
    <div class="form-group">
        <label for="title">Title</label>
        <input type="text" id="title" name="title" value="<%= typeof article !== 'undefined' ? article.title : '' %>" required>
    </div>

    <div class="form-group">
        <label for="category">Category</label>
        <select id="category" name="category" required>
            <% categories.forEach(cat => { %>
                <option value="<%= cat %>" <%= (typeof article !== 'undefined' && article.category === cat) ? 'selected' : '' %>>
                    <%= cat %>
                </option>
            <% }); %>
        </select>
    </div>

    <div class="form-group">
        <label for="author">Author (Optional)</label>
        <input type="text" id="author" name="author" value="<%= typeof article !== 'undefined' ? article.author : '' %>">
    </div>

    <div class="form-group">
        <label for="image">Image URL (Optional - e.g., https://example.com/image.jpg)</label>
        <input type="text" id="image" name="image" value="<%= typeof article !== 'undefined' ? article.image : '' %>">
    </div>
    <!-- In a real app, use a file upload for images -->

    <div class="form-group">
        <label for="content">Content (HTML allowed)</label>
        <textarea id="content" name="content" rows="10" required><%= typeof article !== 'undefined' ? article.content : '' %></textarea>
        <!-- In a real app, use a Rich Text Editor (CKEditor, TinyMCE) -->
    </div>

    <div class="form-group">
        <label for="tags">Tags (comma-separated, Optional)</label>
        <input type="text" id="tags" name="tags" value="<%= typeof article !== 'undefined' && article.tags ? article.tags.join(', ') : '' %>">
    </div>

    <button type="submit"><%= typeof article !== 'undefined' ? 'Update Article' : 'Add Article' %></button>
</form>

<%- include('../partials/footer') %>